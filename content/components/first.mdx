# ðŸ”¨ Building on SOON

## Oracle

### APRO Guide

APRO Oracle Data Pull is a pull mode oracle product for those who require low-latency data feed service.

Following process chart is how pull mode works:

### Program IDs

| <span className="text-blue-600 font-semibold">Description</span> | <span className="text-blue-600 font-semibold">Devnet</span> | <span className="text-blue-600 font-semibold">Testnet</span> |
|------------|---------|----------|
| Apro_SVM_Oracle | 4Mvy4RKRyJMf4PHavvGUuTj9agoddUZ9atQoFma1tyMY | Coming soon |
| Sample_Client | HUJ8ouH6fVonhF1hPV6ENoLid5nbHfyZSpvfujw6X6Hm | Coming soon |

### Authentication

#### Headers
All routes require the following two headers for user authentication:

| <span className="text-blue-600 font-semibold">Header</span> | <span className="text-blue-600 font-semibold">Description</span> |
|--------|-------------|
| Authorization | The user's unique identifier, provided as a UUID (Universally Unique IDentifier). |
| X-Authorization-Timestamp | The current timestamp, with precision up to milliseconds. The timestamp must closely synchronize with the server time, allowing a maximum discrepancy of 5 seconds (by default). |

### API endpoints

#### Return a single report at a given timestamp

**Endpoint**: `/api/soon/reports`

| <span className="text-blue-600 font-semibold">Type</span> | <span className="text-blue-600 font-semibold">Description</span> | <span className="text-blue-600 font-semibold">Parameter(s)</span> |
|------|-------------|--------------|
| HTTP GET | Returns a single report for a given timestamp. | â€¢ feedID: A Data Streams feed ID<br/>â€¢ timestamp: The Unix timestamp for the report |

**Sample request**:
```
GET /api/soon/reports?feedID=<feedID>&timestamp=<timestamp>
```

**Sample response**:
```json
{
  // Response data will appear here
}
```

#### Return a single report with the latest timestamp

**Endpoint**: `/api/soon/reports/latest`

| Type | Parameter(s) |
|------|--------------|
| HTTP GET | feedID: A Data Streams feed ID |

**Sample request**:
```
GET /api/soon/reports/latest?feedID=<feedID>
```

**Sample response**:
```json
{
  // Response data will appear here
}
```

#### Return a report for multiple FeedIDs at a given timestamp

**Endpoint**: `/api/soon/reports/bulk`

| Type | Description | Parameter(s) |
|------|-------------|--------------|
| HTTP GET | Return a report for multiple FeedIDs at a given timestamp. | â€¢ feedIDs: A comma-separated list of Data Streams feed IDs<br/>â€¢ timestamp: The Unix timestamp for the reports<br/>â€¢ startTimestamp: The Unix timestamp for the first report |

**Sample request**:
```
GET /api/soon/reports/bulk?feedIDs=<FeedID1>,<FeedID2>,...&timestamp=<timestamp>
GET /api/soon/reports/bulk?feedIDs=<FeedID1>,<FeedID2>,...&startTimestamp=<startTimestamp>
```

**Sample response**:
```json
{
  // Response data will appear here
}
```

#### Return multiple sequential reports for a single FeedID, starting at a given timestamp

**Endpoint**: `/api/soon/reports/page`

| Type | Description | Parameter(s) |
|------|-------------|--------------|
| HTTP GET | Return multiple sequential reports for a single FeedID, starting at a given timestamp. | â€¢ feedID: A Data Streams feed ID<br/>â€¢ startTimestamp: The Unix timestamp for the first report<br/>â€¢ limit (optional): The number of reports to return |

**Sample request**:
```
GET /api/soon/reports/page?feedID=<FeedID>&startTimestamp=<StartTimestamp>&limit=<Limit>
```

**Sample response**:
```json
{
  // Response data will appear here
}
```

### WebSocket Connection

Establish a streaming WebSocket connection that sends reports for the given feedID(s) after they are verified.

**Endpoint**: `/api/soon/ws`

| Type | Parameter(s) |
|------|--------------|
| WebSocket | feedIDs: A comma-separated list of Data Streams feed IDs |

**Sample request**:
```
GET /api/soon/ws?feedIDs=<feedID1>,<feedID2>,...
```

**Sample response**:
```json
{
  // Response data will appear here
}
```

### Error response codes

| <span className="text-blue-600 font-semibold">Status Code</span> | <span className="text-blue-600 font-semibold">Description</span> |
|-------------|-------------|
| 400 Bad Request | This error is triggered when:<br/>â€¢ There is any missing/malformed query argument<br/>â€¢ Required headers are missing or provided with incorrect values |
| 401 Unauthorized User | This error is triggered when:<br/>â€¢ Authentication fails, typically because the HMAC signature provided by the client doesn't match the one expected by the server<br/>â€¢ A user requests access to a feed without the appropriate permission or that does not exist |
| 500 Internal Server | Indicates an unexpected condition encountered by the server, preventing it from fulfilling the request. This error typically points to issues on the server side. |
| 206 Missing data (/bulk endpoint only) | Indicates that at least one feed ID data is missing from the report. E.g., you requested a report for feed IDs \`feedID1\`, \`feedID2\`, and \`feedID3\` at a given timestamp. If data for \`feedID2\` is missing from the report (not available yet at the specified timestamp), you get [\`feedID1 data\`, \`feedID3 data\`] and a 206 response. |